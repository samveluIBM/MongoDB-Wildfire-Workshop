{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"MongoDB Wildfire Workshop on LinuxONE","text":"<p>Welcome to our MongoDB wildfire workshop on LinuxONE. Organizations can leverage security, high availability and resilency provided by LinuxONE servers by running MongoDB on them. </p>"},{"location":"#agenda","title":"Agenda","text":""},{"location":"#presentations","title":"Presentations","text":"<ul> <li>MongoDB 101</li> <li>MongoDB High Availability</li> <li>MongoDB Sharding (Scalability)</li> <li>MongoDB Use Cases</li> <li>MongoDB Best Practices</li> </ul>"},{"location":"#hands-on-labs","title":"Hands-on Labs","text":"<ul> <li>MongoDB Installation Lab</li> <li>MongoDB Usage Lab (CRUD)</li> <li>MongoDB Operations Lab (Backup / Restore, Startup / Shutdown)</li> <li>MongoDB Advanced Operations Lab (Replication)</li> <li>MongoDB Compass Lab </li> </ul>"},{"location":"#workshop-authors","title":"Workshop authors","text":"<ul> <li>Sam Amsavelu</li> <li>David Simpson</li> </ul>"},{"location":"#acknowledgements","title":"Acknowledgements","text":"<ul> <li>Thanks to the following Contributors for this workshop: Jacob Emery, Matt Mondics, Barry Silliman and Dorothy Quincy</li> </ul>"},{"location":"cloudaccess/","title":"Lab Access to Linux guests on IBM Techzone (Monday 1:06 PM  cloud environment)","text":"<ol> <li> <p>The Lab excercises will be performed on Red Hat Linux 9.x guests running on IBM Z system Cloud enviroment hosted from IBM Techzone </p> </li> <li> <p>To access the IBM Techzone (Cloud enviroment) you will need an IBMid</p> </li> <li> <p>If you have IBMid, proceed to step 4,  otherwise execute the following steps to create the IBMid:</p> </li> <li> <p>Connect to the IBM Techzone (Cloud evironment) using the    following link </p> </li> </ol>"},{"location":"cloudaccess/#creating-an-ibmid","title":"Creating an IBMid","text":"<p>Visit the IBM ID registration page. Fill in your email address, add your first and last name, create a password and specify your country of residence. Click Next.</p> <p></p> <p>After clicking Next, a verification code will be sent to your email address. Copy and paste the code from your email into the verification box. Click Next.</p> <p>Note: check your spam folder or firewall settings if the verification email is not received within 5 minutes. </p>"},{"location":"lab1_7_install/","title":"MongoDB installation","text":""},{"location":"lab1_7_install/#overview","title":"Overview","text":"<p>We will be using the Ansible playbooks to install MongoDB in the lab environment by following the steps below.</p> <ol> <li>Clone the MongoDB git repository</li> <li>Run the setup script </li> <li>Run the ansible playbook </li> </ol>"},{"location":"lab1_7_install/#mongodb-installation-steps","title":"MongoDB installation steps","text":""},{"location":"lab1_7_install/#clone-the-mongodb-git-repository","title":"Clone the mongoDB git repository","text":"<p>Make sure you are connected to the Linux guest from the previous step.</p> The following is an example where the terminal will show that you are connected to the Linux guest [click to expand me] <pre><code>login as: cecuser\nPre-authentication banner message from server:\n|\n| ______________________________________________________________________\n|\n|                     Welcome to IBM Technology Zone\n| ______________________________________________________________________\n|\n|\n| IBM's internal systems must only be used for conducting IBM's business\n| or for purposes authorized by IBM management.  Use is subject to audit\n| at any time by IBM management.\n|\n| Unauthorized access will be investigated and penalties will be pursued\n| in conformance with applicable laws and regulations. If you are not an\n| authorized user disconnect now.\n|\n|\nEnd of banner message from server\ncecuser@129.40.60.161's password:\n\n______________________________________________________________________\n\n                  Welcome to IBM Technology Zone\n______________________________________________________________________\n\n\nIBM's internal systems must only be used for conducting IBM's business\nor for purposes authorized by IBM management.  Use is subject to audit\nat any time by IBM management.\n\nUnauthorized access will be investigated and penalties will be pursued\nin conformance with applicable laws and regulations. If you are not an\nauthorized user disconnect now.\n______________________________________________________________________\n\nIaaS Red Hat Enterprise Linux 8.10\n\nActivate the web console with: systemctl enable --now cockpit.socket\n\nRegister this system with Red Hat Insights: insights-client --register\nCreate an account or view all your systems at https://red.ht/insights-dashboard\nLast login: Thu Mar 13 10:18:51 2025 from 9.19.184.79\n[cecuser@p1243-zvm1 ~]$\n</code></pre> <p>Enter the following Linux commands to switch to super user for installation and then change the directory to a temporary working directory /tmp .</p> <pre><code>   sudo -i \n   cd /tmp\n</code></pre> The following is an example where the terminal will show that you are connected to the Linux terminal as \u201croot\u201d and the working directory is tmp [click to expand me] <pre><code>[cecuser@p1243-zvm1 /]$    sudo -i\n[root@p1243-zvm1 ~]#    cd /tmp\n[root@p1243-zvm1 tmp]#\n</code></pre> <p>We have created an Ansible playbook repository to install MongoDB on a Red Hat Linux guest and clone that repository using the following command.</p> <pre><code>   git clone https://github.com/samveluIBM/MongoDB-Wildfire-Workshop\n</code></pre> The following example shows the output of succesful cloning of the repository [click to expand me] <pre><code>[root@p1243-zvm1 tmp]#    git clone https://github.com/samveluIBM/MongoDB-Wildfire-Workshop\nCloning into 'MongoDB-Wildfire-Workshop'...\nremote: Enumerating objects: 20, done.\nremote: Counting objects: 100% (20/20), done.\nremote: Compressing objects: 100% (14/14), done.\nremote: Total 20 (delta 1), reused 3 (delta 0), pack-reused 0 (from 0)\nReceiving objects: 100% (20/20), 4.99 KiB | 4.99 MiB/s, done.\nResolving deltas: 100% (1/1), done.\n[root@p1243-zvm1 tmp]#\n</code></pre>"},{"location":"lab1_7_install/#run-the-setup-script","title":"Run the setup script","text":"<p>This step will install the python and ansibles to use ansible playbooks to install MongoDB on the Linux guest.  Change to the cloned directory and then run the setup script. Use the following commands:</p> <pre><code>   cd MongoDB-Wildfire-Workshop/\n</code></pre> <pre><code>    ./setup.sh\n</code></pre> The following example shows the output of succesful execution of setup.sh script [click to expand me] <pre><code>Installed products updated.\n\nInstalled:\nansible-9.2.0-1.el8.noarch\nansible-core-2.16.3-2.el8.s390x\npython3-jmespath-0.9.0-11.el8.noarch\npython3.12-3.12.8-1.el8_10.s390x\npython3.12-cffi-1.16.0-2.el8.s390x\npython3.12-cryptography-41.0.7-1.el8.s390x\npython3.12-libs-3.12.8-1.el8_10.s390x\npython3.12-pip-wheel-23.2.1-4.el8.noarch\npython3.12-ply-3.11-2.el8.noarch\npython3.12-pycparser-2.20-2.el8.noarch\npython3.12-pyyaml-6.0.1-2.el8.s390x\npython39-3.9.20-1.module+el8.10.0+22342+478c159e.s390x\npython39-libs-3.9.20-1.module+el8.10.0+22342+478c159e.s390x\npython39-pip-20.2.4-9.module+el8.10.0+21329+8d76b841.noarch\npython39-pip-wheel-20.2.4-9.module+el8.10.0+21329+8d76b841.noarch\npython39-setuptools-50.3.2-6.module+el8.10.0+22183+c898c0c1.noarch\npython39-setuptools-wheel-50.3.2-6.module+el8.10.0+22183+c898c0c1.noarch\nsshpass-1.09-4.el8.s390x\n\nComplete!\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab1_7_install/#run-the-ansible-playbook","title":"Run the ansible playbook","text":"<p>In this step we will run the ansible playbook to install MongoDB. Use the following command:</p> <pre><code>   ansible-playbook mongodb7Install.yml \n</code></pre> The following example shows the output of succesful MongoDB installtion [click to expand me] <pre><code>[root@zdblab05 zmongodb]# ansible-playbook mongodbInstall.yml\n\nPLAY [Install MongoDB on a Linux Guest.] ***********************************************************\n\nTASK [Gathering Facts] *****************************************************************************\nok: [127.0.0.1]\n\nTASK [Create repo file for mongodb-enterprise] *****************************************************\nok: [127.0.0.1]\n\nTASK [Install  mongodb-enterprise.] ****************************************************************\nchanged: [127.0.0.1] =&gt; (item={'pkg': 'mongodb-enterprise', 'when': True})\nok: [127.0.0.1] =&gt; (item={'pkg': 'libselinux-utils', 'when': \"db_path != '/var/lib/mongodb' or log_file != '/var/log/mongodb/mongod.log'\"})\nok: [127.0.0.1] =&gt; (item={'pkg': 'policycoreutils-python-utils', 'when': \"db_path != '/var/lib/mongodb' or log_file != '/var/log/mongodb/mongod.log'\"})\n\nTASK [Set SELinux to Permissive mode.] *************************************************************\nskipping: [127.0.0.1]\n\nTASK [Disable SELinux permanently in configuration.] ***********************************************\nskipping: [127.0.0.1]\n\nTASK [Ensure db and log files exist and are owned by mongod user.] *********************************\nchanged: [127.0.0.1] =&gt; (item={'path': '/var/lib/mongodb', 'state': 'directory', 'recurse': True})\nchanged: [127.0.0.1] =&gt; (item={'path': '/var/log/mongodb/mongod.log', 'state': 'touch', 'recurse': False})\n\nTASK [Change db and/or log file paths.] ************************************************************\nchanged: [127.0.0.1] =&gt; (item={'key': 'dbPath', 'value': '/var/lib/mongodb', 'when': \"db_path != '/var/lib/mongodb'\"})\nok: [127.0.0.1] =&gt; (item={'key': 'path', 'value': '/var/log/mongodb/mongod.log', 'when': \"log_file != '/var/log/mongodb/mongod.log'\"})\n\nTASK [Start mongod service.] ***********************************************************************\nchanged: [127.0.0.1]\n\nTASK [Check mongod status.] ************************************************************************\nchanged: [127.0.0.1]\n\nTASK [Print mongod status.] ************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: |-\n\u25cf mongod.service - MongoDB Database Server\n Loaded: loaded (/usr/lib/systemd/system/mongod.service; enabled; vendor preset: disabled)\n Active: active (running) since Mon 2025-03-10 21:51:38 UTC; 288ms ago\n   Docs: https://docs.mongodb.org/manual\nMain PID: 490438 (mongod)\n Memory: 70.3M\n CGroup: /system.slice/mongod.service\n         \u2514\u2500490438 /usr/bin/mongod -f /etc/mongod.conf\n\nMar 10 21:51:38 zdblab05 systemd[1]: Started MongoDB Database Server.\nMar 10 21:51:38 zdblab05 mongod[490438]: {\"t\":{\"$date\":\"2025-03-10T21:51:38.431Z\"},\"s\":\"I\",  \"c\":\"CONTROL\",  \"id\":7484500, \"ctx\":\"main\",\"msg\":\"Environment variable MONGODB_CONFIG_OVERRIDE_NOFORK == 1, overriding \\\"processManagement.fork\\\" to false\"}\n\nTASK [Check mongod version.] ***********************************************************************\nchanged: [127.0.0.1]\n\nTASK [Print mongod version.] ***********************************************************************\nok: [127.0.0.1] =&gt;\nmsg: mongod_version.stdout\n\nTASK [Set bindIP to 0.0.0.0 in mongod.conf] ********************************************************\nchanged: [127.0.0.1]\n\nTASK [Verify MongoDB Enterprise Edition installed successfully.] ***********************************\nchanged: [127.0.0.1]\n\nTASK [Congratulations!] ****************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: MongoDB installation complete.\n\nPLAY RECAP *****************************************************************************************\n127.0.0.1                  : ok=13   changed=8    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0\n\n[root@zdblab05 zmongodb]#\n</code></pre>"},{"location":"lab1_7_install/#mongodb-uninstallation","title":"MongoDB Uninstallation","text":""},{"location":"lab1_7_install/#uninstall-mongodb","title":"Uninstall MongoDB","text":"<p>Run the ansible playbook to uninstall mongoDB. Use the following command:</p> <pre><code>   ansible-playbook mongodbUnInstall.yml \n</code></pre> The following example shows the output of succesful MongoDB uninstalltion [click to expand me] <pre><code>[root@zdblab05 zmongodb]# ansible-playbook mongodbUnInstall.yml\n\nPLAY [UnInstall MongoDB on a Linux Guest.] *********************************************************\n\nTASK [Gathering Facts] *****************************************************************************\nok: [127.0.0.1]\n\nTASK [Gather info about installed  services.] ******************************************************\nok: [127.0.0.1]\n\nTASK [Stop mongod service.] ************************************************************************\nchanged: [127.0.0.1]\n\nTASK [Uninstall MongoDB.] **************************************************************************\nchanged: [127.0.0.1]\n\nTASK [Remove data and log directories] *************************************************************\nok: [127.0.0.1] =&gt; (item=/var/log/mongodb/mongod.log)\nchanged: [127.0.0.1] =&gt; (item=/var/lib/mongodb)\n\nTASK [Done.] ***************************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: MongoDB has been uninstalled successfully.\n\nPLAY RECAP *****************************************************************************************\n127.0.0.1                  : ok=6    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\n\n[root@zdblab05 zmongodb]#\n</code></pre>"},{"location":"lab1_7_install/#install-mongodb","title":"Install MongoDB","text":"<p>In this step we will run the ansible playbook to install MongoDB back. Use the following command:</p> <pre><code>   ansible-playbook mongodb7Install.yml \n</code></pre> The following example shows the output of succesful MongoDB installtion [click to expand me] <pre><code>[root@zdblab05 zmongodb]# ansible-playbook mongodbInstall.yml\n\nPLAY [Install MongoDB on a Linux Guest.] ***********************************************************\n\nTASK [Gathering Facts] *****************************************************************************\nok: [127.0.0.1]\n\nTASK [Create repo file for mongodb-enterprise] *****************************************************\nok: [127.0.0.1]\n\nTASK [Install  mongodb-enterprise.] ****************************************************************\nchanged: [127.0.0.1] =&gt; (item={'pkg': 'mongodb-enterprise', 'when': True})\nok: [127.0.0.1] =&gt; (item={'pkg': 'libselinux-utils', 'when': \"db_path != '/var/lib/mongodb' or log_file != '/var/log/mongodb/mongod.log'\"})\nok: [127.0.0.1] =&gt; (item={'pkg': 'policycoreutils-python-utils', 'when': \"db_path != '/var/lib/mongodb' or log_file != '/var/log/mongodb/mongod.log'\"})\n\nTASK [Set SELinux to Permissive mode.] *************************************************************\nskipping: [127.0.0.1]\n\nTASK [Disable SELinux permanently in configuration.] ***********************************************\nskipping: [127.0.0.1]\n\nTASK [Ensure db and log files exist and are owned by mongod user.] *********************************\nchanged: [127.0.0.1] =&gt; (item={'path': '/var/lib/mongodb', 'state': 'directory', 'recurse': True})\nchanged: [127.0.0.1] =&gt; (item={'path': '/var/log/mongodb/mongod.log', 'state': 'touch', 'recurse': False})\n\nTASK [Change db and/or log file paths.] ************************************************************\nchanged: [127.0.0.1] =&gt; (item={'key': 'dbPath', 'value': '/var/lib/mongodb', 'when': \"db_path != '/var/lib/mongodb'\"})\nok: [127.0.0.1] =&gt; (item={'key': 'path', 'value': '/var/log/mongodb/mongod.log', 'when': \"log_file != '/var/log/mongodb/mongod.log'\"})\n\nTASK [Start mongod service.] ***********************************************************************\nchanged: [127.0.0.1]\n\nTASK [Check mongod status.] ************************************************************************\nchanged: [127.0.0.1]\n\nTASK [Print mongod status.] ************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: |-\n\u25cf mongod.service - MongoDB Database Server\n Loaded: loaded (/usr/lib/systemd/system/mongod.service; enabled; vendor preset: disabled)\n Active: active (running) since Mon 2025-03-10 21:51:38 UTC; 288ms ago\n   Docs: https://docs.mongodb.org/manual\nMain PID: 490438 (mongod)\n Memory: 70.3M\n CGroup: /system.slice/mongod.service\n         \u2514\u2500490438 /usr/bin/mongod -f /etc/mongod.conf\n\nMar 10 21:51:38 zdblab05 systemd[1]: Started MongoDB Database Server.\nMar 10 21:51:38 zdblab05 mongod[490438]: {\"t\":{\"$date\":\"2025-03-10T21:51:38.431Z\"},\"s\":\"I\",  \"c\":\"CONTROL\",  \"id\":7484500, \"ctx\":\"main\",\"msg\":\"Environment variable MONGODB_CONFIG_OVERRIDE_NOFORK == 1, overriding \\\"processManagement.fork\\\" to false\"}\n\nTASK [Check mongod version.] ***********************************************************************\nchanged: [127.0.0.1]\n\nTASK [Print mongod version.] ***********************************************************************\nok: [127.0.0.1] =&gt;\nmsg: mongod_version.stdout\n\nTASK [Set bindIP to 0.0.0.0 in mongod.conf] ********************************************************\nchanged: [127.0.0.1]\n\nTASK [Verify MongoDB Enterprise Edition installed successfully.] ***********************************\nchanged: [127.0.0.1]\n\nTASK [Congratulations!] ****************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: MongoDB installation complete.\n\nPLAY RECAP *****************************************************************************************\n127.0.0.1                  : ok=13   changed=8    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0\n\n[root@zdblab05 zmongodb]#\n</code></pre>"},{"location":"lab1_7_install/#summary","title":"Summary","text":"<p>In this lab we used Ansible playbooks to install MongoDB in the lab environment.     </p>"},{"location":"lab1_8_install/","title":"MongoDB installation","text":""},{"location":"lab1_8_install/#overview","title":"Overview","text":"<p>We will be using the Ansible playbooks to install MongoDB in the lab environment by following the steps below.</p> <ol> <li>Clone the MongoDB git repository</li> <li>Run the setup script </li> <li>Run the ansible playbook </li> </ol>"},{"location":"lab1_8_install/#mongodb-installation-steps","title":"MongoDB installation steps","text":""},{"location":"lab1_8_install/#clone-the-mongodb-git-repository","title":"Clone the mongoDB git repository","text":"<p>Make sure you are connected to the Linux guest from the previous step.</p> The following is an example where the terminal will show that you are connected to the Linux guest [click to expand me] <pre><code>login as: cecuser\nPre-authentication banner message from server:\n|\n| ______________________________________________________________________\n|\n|                     Welcome to IBM Technology Zone\n| ______________________________________________________________________\n|\n|\n| IBM's internal systems must only be used for conducting IBM's business\n| or for purposes authorized by IBM management.  Use is subject to audit\n| at any time by IBM management.\n|\n| Unauthorized access will be investigated and penalties will be pursued\n| in conformance with applicable laws and regulations. If you are not an\n| authorized user disconnect now.\n|\n|\nEnd of banner message from server\ncecuser@129.40.60.161's password:\n\n______________________________________________________________________\n\n                  Welcome to IBM Technology Zone\n______________________________________________________________________\n\n\nIBM's internal systems must only be used for conducting IBM's business\nor for purposes authorized by IBM management.  Use is subject to audit\nat any time by IBM management.\n\nUnauthorized access will be investigated and penalties will be pursued\nin conformance with applicable laws and regulations. If you are not an\nauthorized user disconnect now.\n______________________________________________________________________\n\nIaaS Red Hat Enterprise Linux 8.10\n\nActivate the web console with: systemctl enable --now cockpit.socket\n\nRegister this system with Red Hat Insights: insights-client --register\nCreate an account or view all your systems at https://red.ht/insights-dashboard\nLast login: Thu Mar 13 10:18:51 2025 from 9.19.184.79\n[cecuser@p1243-zvm1 ~]$\n</code></pre> <p>Enter the following Linux commands to switch to super user for installation and then change the directory to a temporary working directory /tmp .</p> <pre><code>   sudo -i \n   cd /tmp\n</code></pre> The following is an example where the terminal will show that you are connected to the Linux terminal as \u201croot\u201d and the working directory is tmp [click to expand me] <pre><code>[cecuser@p1243-zvm1 /]$    sudo -i\n[root@p1243-zvm1 ~]#    cd /tmp\n[root@p1243-zvm1 tmp]#\n</code></pre> <p>We have created an Ansible playbook repository to install MongoDB on a Red Hat Linux guest and clone that repository using the following command.</p> <pre><code>   git clone https://github.com/samveluIBM/MongoDB-Wildfire-Workshop\n</code></pre> The following example shows the output of succesful cloning of the repository [click to expand me] <pre><code>[root@p1243-zvm1 tmp]#    git clone https://github.com/samveluIBM/MongoDB-Wildfire-Workshop\nCloning into 'MongoDB-Wildfire-Workshop'...\nremote: Enumerating objects: 20, done.\nremote: Counting objects: 100% (20/20), done.\nremote: Compressing objects: 100% (14/14), done.\nremote: Total 20 (delta 1), reused 3 (delta 0), pack-reused 0 (from 0)\nReceiving objects: 100% (20/20), 4.99 KiB | 4.99 MiB/s, done.\nResolving deltas: 100% (1/1), done.\n[root@p1243-zvm1 tmp]#\n</code></pre>"},{"location":"lab1_8_install/#run-the-setup-script","title":"Run the setup script","text":"<p>This step will install the python and ansibles to use ansible playbooks to install MongoDB on the Linux guest.  Change to the cloned directory and then run the setup script. Use the following commands:</p> <pre><code>   cd MongoDB-Wildfire-Workshop/\n</code></pre> <pre><code>    ./setup.sh\n</code></pre> The following example shows the output of succesful execution of setup.sh script [click to expand me] <pre><code>Installed products updated.\n\nInstalled:\nansible-9.2.0-1.el8.noarch\nansible-core-2.16.3-2.el8.s390x\npython3-jmespath-0.9.0-11.el8.noarch\npython3.12-3.12.8-1.el8_10.s390x\npython3.12-cffi-1.16.0-2.el8.s390x\npython3.12-cryptography-41.0.7-1.el8.s390x\npython3.12-libs-3.12.8-1.el8_10.s390x\npython3.12-pip-wheel-23.2.1-4.el8.noarch\npython3.12-ply-3.11-2.el8.noarch\npython3.12-pycparser-2.20-2.el8.noarch\npython3.12-pyyaml-6.0.1-2.el8.s390x\npython39-3.9.20-1.module+el8.10.0+22342+478c159e.s390x\npython39-libs-3.9.20-1.module+el8.10.0+22342+478c159e.s390x\npython39-pip-20.2.4-9.module+el8.10.0+21329+8d76b841.noarch\npython39-pip-wheel-20.2.4-9.module+el8.10.0+21329+8d76b841.noarch\npython39-setuptools-50.3.2-6.module+el8.10.0+22183+c898c0c1.noarch\npython39-setuptools-wheel-50.3.2-6.module+el8.10.0+22183+c898c0c1.noarch\nsshpass-1.09-4.el8.s390x\n\nComplete!\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab1_8_install/#run-the-ansible-playbook","title":"Run the ansible playbook","text":"<p>In this step we will run the ansible playbook to install MongoDB. Use the following command:</p> <pre><code>   ansible-playbook mongodb8Install.yml \n</code></pre> The following example shows the output of succesful MongoDB installtion [click to expand me] <pre><code>[root@zdblab05 zmongodb]# ansible-playbook mongodbInstall.yml\n\nPLAY [Install MongoDB on a Linux Guest.] ***********************************************************\n\nTASK [Gathering Facts] *****************************************************************************\nok: [127.0.0.1]\n\nTASK [Create repo file for mongodb-enterprise] *****************************************************\nok: [127.0.0.1]\n\nTASK [Install  mongodb-enterprise.] ****************************************************************\nchanged: [127.0.0.1] =&gt; (item={'pkg': 'mongodb-enterprise', 'when': True})\nok: [127.0.0.1] =&gt; (item={'pkg': 'libselinux-utils', 'when': \"db_path != '/var/lib/mongodb' or log_file != '/var/log/mongodb/mongod.log'\"})\nok: [127.0.0.1] =&gt; (item={'pkg': 'policycoreutils-python-utils', 'when': \"db_path != '/var/lib/mongodb' or log_file != '/var/log/mongodb/mongod.log'\"})\n\nTASK [Set SELinux to Permissive mode.] *************************************************************\nskipping: [127.0.0.1]\n\nTASK [Disable SELinux permanently in configuration.] ***********************************************\nskipping: [127.0.0.1]\n\nTASK [Ensure db and log files exist and are owned by mongod user.] *********************************\nchanged: [127.0.0.1] =&gt; (item={'path': '/var/lib/mongodb', 'state': 'directory', 'recurse': True})\nchanged: [127.0.0.1] =&gt; (item={'path': '/var/log/mongodb/mongod.log', 'state': 'touch', 'recurse': False})\n\nTASK [Change db and/or log file paths.] ************************************************************\nchanged: [127.0.0.1] =&gt; (item={'key': 'dbPath', 'value': '/var/lib/mongodb', 'when': \"db_path != '/var/lib/mongodb'\"})\nok: [127.0.0.1] =&gt; (item={'key': 'path', 'value': '/var/log/mongodb/mongod.log', 'when': \"log_file != '/var/log/mongodb/mongod.log'\"})\n\nTASK [Start mongod service.] ***********************************************************************\nchanged: [127.0.0.1]\n\nTASK [Check mongod status.] ************************************************************************\nchanged: [127.0.0.1]\n\nTASK [Print mongod status.] ************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: |-\n\u25cf mongod.service - MongoDB Database Server\n Loaded: loaded (/usr/lib/systemd/system/mongod.service; enabled; vendor preset: disabled)\n Active: active (running) since Mon 2025-03-10 21:51:38 UTC; 288ms ago\n   Docs: https://docs.mongodb.org/manual\nMain PID: 490438 (mongod)\n Memory: 70.3M\n CGroup: /system.slice/mongod.service\n         \u2514\u2500490438 /usr/bin/mongod -f /etc/mongod.conf\n\nMar 10 21:51:38 zdblab05 systemd[1]: Started MongoDB Database Server.\nMar 10 21:51:38 zdblab05 mongod[490438]: {\"t\":{\"$date\":\"2025-03-10T21:51:38.431Z\"},\"s\":\"I\",  \"c\":\"CONTROL\",  \"id\":7484500, \"ctx\":\"main\",\"msg\":\"Environment variable MONGODB_CONFIG_OVERRIDE_NOFORK == 1, overriding \\\"processManagement.fork\\\" to false\"}\n\nTASK [Check mongod version.] ***********************************************************************\nchanged: [127.0.0.1]\n\nTASK [Print mongod version.] ***********************************************************************\nok: [127.0.0.1] =&gt;\nmsg: mongod_version.stdout\n\nTASK [Set bindIP to 0.0.0.0 in mongod.conf] ********************************************************\nchanged: [127.0.0.1]\n\nTASK [Verify MongoDB Enterprise Edition installed successfully.] ***********************************\nchanged: [127.0.0.1]\n\nTASK [Congratulations!] ****************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: MongoDB installation complete.\n\nPLAY RECAP *****************************************************************************************\n127.0.0.1                  : ok=13   changed=8    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0\n\n[root@zdblab05 zmongodb]#\n</code></pre>"},{"location":"lab1_8_install/#mongodb-uninstallation","title":"MongoDB Uninstallation","text":""},{"location":"lab1_8_install/#uninstall-mongodb","title":"Uninstall MongoDB","text":"<p>Run the ansible playbook to uninstall mongoDB. Use the following command:</p> <pre><code>   ansible-playbook mongodbUnInstall.yml \n</code></pre> The following example shows the output of succesful MongoDB uninstalltion [click to expand me] <pre><code>[root@zdblab05 zmongodb]# ansible-playbook mongodbUnInstall.yml\n\nPLAY [UnInstall MongoDB on a Linux Guest.] *********************************************************\n\nTASK [Gathering Facts] *****************************************************************************\nok: [127.0.0.1]\n\nTASK [Gather info about installed  services.] ******************************************************\nok: [127.0.0.1]\n\nTASK [Stop mongod service.] ************************************************************************\nchanged: [127.0.0.1]\n\nTASK [Uninstall MongoDB.] **************************************************************************\nchanged: [127.0.0.1]\n\nTASK [Remove data and log directories] *************************************************************\nok: [127.0.0.1] =&gt; (item=/var/log/mongodb/mongod.log)\nchanged: [127.0.0.1] =&gt; (item=/var/lib/mongodb)\n\nTASK [Done.] ***************************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: MongoDB has been uninstalled successfully.\n\nPLAY RECAP *****************************************************************************************\n127.0.0.1                  : ok=6    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\n\n[root@zdblab05 zmongodb]#\n</code></pre>"},{"location":"lab1_8_install/#install-mongodb","title":"Install MongoDB","text":"<p>In this step we will run the ansible playbook to install MongoDB back. Use the following command:</p> <pre><code>   ansible-playbook mongodb8Install.yml \n</code></pre> The following example shows the output of succesful MongoDB installtion [click to expand me] <pre><code>[root@zdblab05 zmongodb]# ansible-playbook mongodbInstall.yml\n\nPLAY [Install MongoDB on a Linux Guest.] ***********************************************************\n\nTASK [Gathering Facts] *****************************************************************************\nok: [127.0.0.1]\n\nTASK [Create repo file for mongodb-enterprise] *****************************************************\nok: [127.0.0.1]\n\nTASK [Install  mongodb-enterprise.] ****************************************************************\nchanged: [127.0.0.1] =&gt; (item={'pkg': 'mongodb-enterprise', 'when': True})\nok: [127.0.0.1] =&gt; (item={'pkg': 'libselinux-utils', 'when': \"db_path != '/var/lib/mongodb' or log_file != '/var/log/mongodb/mongod.log'\"})\nok: [127.0.0.1] =&gt; (item={'pkg': 'policycoreutils-python-utils', 'when': \"db_path != '/var/lib/mongodb' or log_file != '/var/log/mongodb/mongod.log'\"})\n\nTASK [Set SELinux to Permissive mode.] *************************************************************\nskipping: [127.0.0.1]\n\nTASK [Disable SELinux permanently in configuration.] ***********************************************\nskipping: [127.0.0.1]\n\nTASK [Ensure db and log files exist and are owned by mongod user.] *********************************\nchanged: [127.0.0.1] =&gt; (item={'path': '/var/lib/mongodb', 'state': 'directory', 'recurse': True})\nchanged: [127.0.0.1] =&gt; (item={'path': '/var/log/mongodb/mongod.log', 'state': 'touch', 'recurse': False})\n\nTASK [Change db and/or log file paths.] ************************************************************\nchanged: [127.0.0.1] =&gt; (item={'key': 'dbPath', 'value': '/var/lib/mongodb', 'when': \"db_path != '/var/lib/mongodb'\"})\nok: [127.0.0.1] =&gt; (item={'key': 'path', 'value': '/var/log/mongodb/mongod.log', 'when': \"log_file != '/var/log/mongodb/mongod.log'\"})\n\nTASK [Start mongod service.] ***********************************************************************\nchanged: [127.0.0.1]\n\nTASK [Check mongod status.] ************************************************************************\nchanged: [127.0.0.1]\n\nTASK [Print mongod status.] ************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: |-\n\u25cf mongod.service - MongoDB Database Server\n Loaded: loaded (/usr/lib/systemd/system/mongod.service; enabled; vendor preset: disabled)\n Active: active (running) since Mon 2025-03-10 21:51:38 UTC; 288ms ago\n   Docs: https://docs.mongodb.org/manual\nMain PID: 490438 (mongod)\n Memory: 70.3M\n CGroup: /system.slice/mongod.service\n         \u2514\u2500490438 /usr/bin/mongod -f /etc/mongod.conf\n\nMar 10 21:51:38 zdblab05 systemd[1]: Started MongoDB Database Server.\nMar 10 21:51:38 zdblab05 mongod[490438]: {\"t\":{\"$date\":\"2025-03-10T21:51:38.431Z\"},\"s\":\"I\",  \"c\":\"CONTROL\",  \"id\":7484500, \"ctx\":\"main\",\"msg\":\"Environment variable MONGODB_CONFIG_OVERRIDE_NOFORK == 1, overriding \\\"processManagement.fork\\\" to false\"}\n\nTASK [Check mongod version.] ***********************************************************************\nchanged: [127.0.0.1]\n\nTASK [Print mongod version.] ***********************************************************************\nok: [127.0.0.1] =&gt;\nmsg: mongod_version.stdout\n\nTASK [Set bindIP to 0.0.0.0 in mongod.conf] ********************************************************\nchanged: [127.0.0.1]\n\nTASK [Verify MongoDB Enterprise Edition installed successfully.] ***********************************\nchanged: [127.0.0.1]\n\nTASK [Congratulations!] ****************************************************************************\nok: [127.0.0.1] =&gt;\nmsg: MongoDB installation complete.\n\nPLAY RECAP *****************************************************************************************\n127.0.0.1                  : ok=13   changed=8    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0\n\n[root@zdblab05 zmongodb]#\n</code></pre>"},{"location":"lab1_8_install/#summary","title":"Summary","text":"<p>In this lab we used Ansible playbooks to install MongoDB in the lab environment.     </p>"},{"location":"lab2_basics/","title":"MongoDB basic usage lab","text":""},{"location":"lab2_basics/#overview","title":"Overview","text":"<p>The objective of this lab is to execute some basic commands in a MongoDB deployment. We will be using  mongosh  shell environment to execute the MongoDB commands.</p> <ol> <li>Connect to MongoDB deployment using MongoDB Shell  mongosh</li> <li>Execute basic MongoDB commands </li> </ol>"},{"location":"lab2_basics/#mongodb-basic-usage-operations","title":"MongoDB basic usage operations","text":""},{"location":"lab2_basics/#connect-to-mongodb-deployment-using-mongosh","title":"Connect to MongoDB deployment using mongosh","text":"<p>Make sure you are connected to the Linux guest from the previous step.</p> <p>The MongoDB Shell, mongosh, is a JavaScript and Node.js REPL environment for interacting with MongoDB deployments. We can use the MongoDB Shell to test queries and interact with the data in the MongoDB instance running on our localhost with default port 27017.</p> <p>Enter the following command to connect to MongoDB</p> <p><pre><code>   mongosh\n</code></pre> You can see the MongoDB version and some informational / warning messages.</p> The following is an example where the terminal will show that you are connected to the MongoDB environment [click to expand me] <pre><code>[root@itzvsi-pofxmfw MongoDB-Wildfire-Workshop]# mongosh\nCurrent Mongosh Log ID: 67d9aa3e3a1856e5a3a63a57\nConnecting to:          mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+2.4.2\nUsing MongoDB:          8.0.5\nUsing Mongosh:          2.4.2\n\nFor mongosh info see: https://www.mongodb.com/docs/mongodb-shell/\n\n------\n   The server generated these startup warnings when booting\n   2025-03-18T13:07:14.945-04:00: Access control is not enabled for the database. Read and write access to data and configuration is unrestricted\n   2025-03-18T13:07:14.945-04:00: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile\n   2025-03-18T13:07:14.945-04:00: vm.max_map_count is too low\n------\n\nEnterprise test&gt;\n</code></pre> <p>You may use the cls command to clear the shell environment messages</p> <pre><code>   cls\n</code></pre>"},{"location":"lab2_basics/#execute-basic-mongodb-commands","title":"Execute basic MongoDB commands","text":""},{"location":"lab2_basics/#list-databases","title":"List databases","text":"<p>You can list the databases by issuing the show dbs command in mongosh shell.</p> <pre><code>   show dbs\n</code></pre> <p>The output of the above command will show the available databases, and in our case there are three default databases in the MongoDB deployment</p> The following example shows that there are three databases [click to expand me] <pre><code>Enterprise test&gt;    show dbs\nadmin   40.00 KiB\nconfig  60.00 KiB\nlocal   40.00 KiB\nEnterprise test&gt;\n</code></pre>"},{"location":"lab2_basics/#display-the-current-database","title":"Display the current database","text":"<p>You can list the current databases by issuing the db command in mongosh shell.</p> <pre><code>   db\n</code></pre> <p>The output of the above command will show the current available database, you can see the current database as \u201ctest\u201d in our case.</p> The following example shows the current database [click to expand me] <pre><code>Enterprise test&gt; db\ntest\nEnterprise test&gt;\n</code></pre>"},{"location":"lab2_basics/#create-a-new-database","title":"Create a new database","text":"<p>In MongoDB creating a new database is done by issuing use command. If the database is not already there the database will be created automatically. Here we will create \"labtest\" database </p> <pre><code>   use labtest\n</code></pre> <p>The output of the above command shows the current database is \u201clabtest\u201d in our case. </p> The following example shows the current databases [click to expand me] <pre><code>Enterprise test&gt; use labtest\nswitched to db labtest\nEnterprise labtest&gt;\n</code></pre>"},{"location":"lab2_basics/#create-documents","title":"Create documents","text":"<p>Let us create documents into our \"labtest\" database. The dosuments are created in a collection. If a collection doesn\u2019t exist in the database, it will be created for you. </p> <p>In our example we will first insert a single document into \u201clabtest\u201d database and \u201cemployee\u201d collection using the  db.collection.insertOne() method.</p> <p><pre><code>   db.employee.insertOne(\n   {\n    name: \"John Doe\",\n    number: 1000  \n   }\n  )\n</code></pre> When a document is created MongoDB generates the _id field and its value automatically. The generated ObjectId consists of a unique randomly generated hexadecimal value.</p> The following example shows the output of the insert operation  [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.insertOne(\n...    {\n...     name: \"John Doe\",\n...     number: 1000\n...    }\n...   )\n{\nacknowledged: true,\ninsertedId: ObjectId('67d329a34065a9f808a63a58')\n}\nEnterprise labtest&gt;\n</code></pre> <p>Now let us insert two more documents into our \"labtest\" database and \u201cemployee\u201d collection using the db.collection.insertMany() method.</p> <pre><code>   db.employee.insertMany([\n      {\n        name: \"Emily John\",\n        number: 1500  \n      },\n      {\n        name: \"Super Man\",\n       number: 2000  \n       }\n    ])\n</code></pre> The following example shows the output of the insert operation  [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.insertMany([\n...       {\n...         name: \"Emily John\",\n...         number: 1500\n...       },\n...       {\n...         name: \"Super Man\",\n...        number: 2000\n...        }\n...     ])\n{\nacknowledged: true,\ninsertedIds: {\n'0': ObjectId('67d32b594065a9f808a63a59'),\n'1': ObjectId('67d32b594065a9f808a63a5a')\n}\n}\nEnterprise labtest&gt;\n</code></pre>"},{"location":"lab2_basics/#query-documents","title":"Query documents","text":"<p>Let us query the documents in our \"labtest\" database by using the  db.collection.find() method.</p> <pre><code>   db.employee.find()\n</code></pre> The following example shows there are three documents [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.find()\n[\n{\n_id: ObjectId('67d329a34065a9f808a63a58'),\nname: 'John Doe',\nnumber: 1000\n},\n{\n_id: ObjectId('67d32b594065a9f808a63a59'),\nname: 'Emily John',\nnumber: 1500\n},\n{\n_id: ObjectId('67d32b594065a9f808a63a5a'),\nname: 'Super Man',\nnumber: 2000\n}\n]\nEnterprise labtest&gt;\n</code></pre> <p>Let us query the documents in our \"labtest\" database for a specific search condition by using the  db.collection.find() method.</p> <p>We will find the documents matching employee number 1000</p> <pre><code>   db.employee.find( { \"number\": 1000 })\n</code></pre> The following example shows there is one document with number 1000 [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.find()\n[\n{\n_id: ObjectId('67d329a34065a9f808a63a58'),\nname: 'John Doe',\nnumber: 1000\n}\n]\nEnterprise labtest&gt;\n</code></pre>"},{"location":"lab2_basics/#update-documents","title":"Update documents","text":"<p>Let us update a document in our \"labtest\" database by using the db.collection.updateOne() method. We will add a new field \u201ccurrentDate\u201d to a single document who has a \u201cnumber\u201d field value equal to 1000.</p> <pre><code>   db.employee.updateOne(  { \"number\": 1000 }, \n    {\n     $currentDate: { lastUpdated: true } \n    }\n   )\n</code></pre> The following example shows a single document is updated [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.updateOne(  { \"number\": 1000 },\n...     {\n...      $currentDate: { lastUpdated: true }\n...     }\n...    )\n{\nacknowledged: true,\ninsertedId: null,\nmatchedCount: 1,\nmodifiedCount: 1,\nupsertedCount: 0\n}\nEnterprise labtest&gt;\n</code></pre> <p>Let us query the documents in our \"labtest\" database by using the  db.collection.find() method.</p> <pre><code>   db.employee.find()\n</code></pre> The following example shows that there are three documents and only one document with number 1000 has one extra column lastUpdated  [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.find()\n[\n{\n_id: ObjectId('67d329a34065a9f808a63a58'),\nname: 'John Doe',\nnumber: 1000,\nlastUpdated: ISODate('2025-03-13T19:42:34.906Z')\n},\n{\n_id: ObjectId('67d32b594065a9f808a63a59'),\nname: 'Emily John',\nnumber: 1500\n},\n{\n_id: ObjectId('67d32b594065a9f808a63a5a'),\nname: 'Super Man',\nnumber: 2000\n}\n]\nEnterprise labtest&gt;\n</code></pre>"},{"location":"lab2_basics/#delete-documents","title":"Delete documents","text":"<p>The MongoDB shell provides the following methods to delete documents from a collection:</p> <p>To delete a single document, use db.collection.deleteOne() </p> <p>To delete multiple documents, use db.collection.deleteMany()</p> <p>Let us delete a single document in our \"labtest\" database by using the  db.collection.deleteOne() method which satisfies our criteria to match number 1500</p> <pre><code>   db.employee.deleteOne({ \"number\": 1500 })\n</code></pre> The following example shows the document is deleted [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.deleteOne({ \"number\": 1500 })\n{ acknowledged: true, deletedCount: 1 }\nEnterprise labtest&gt;\n</code></pre> <p>Let us query the documents in our \"labtest\" database by using the  db.collection.find() method.</p> <pre><code>   db.employee.find()\n</code></pre> The following example shows that there are two documents [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.find()\n[\n{\n_id: ObjectId('67d329a34065a9f808a63a58'),\nname: 'John Doe',\nnumber: 1000,\nlastUpdated: ISODate('2025-03-13T19:42:34.906Z')\n},\n{\n_id: ObjectId('67d32b594065a9f808a63a5a'),\nname: 'Super Man',\nnumber: 2000\n}\n]\nEnterprise labtest&gt;\n</code></pre>"},{"location":"lab2_basics/#count-the-number-of-documents","title":"Count the number of documents","text":"<p>Let us query the number of documents in our \"employee\" collection of the \"labtest\" database by using the db.collection.countDocuments() method  </p> <pre><code>   db.employee.countDocuments()\n</code></pre> The following example shows that there are two documents [click to expand me] <pre><code>Enterprise labtest&gt;    db.employee.countDocuments()\n2\nEnterprise labtest&gt;\n</code></pre>"},{"location":"lab2_basics/#summary","title":"Summary","text":"<p>In this lab we have executed some basic MongoDB commands in a MongoDB deployment  using  mongosh  shell environment. </p> <p>Now you can exit the mongosh shell environment by issuing exit command</p> <pre><code>   exit\n</code></pre> The following example shows the output [click to expand me] <pre><code>Enterprise labtest&gt;    exit\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab3_operations/","title":"MongoDB basic operations lab","text":""},{"location":"lab3_operations/#overview","title":"Overview","text":"<p>The objective of this lab is to execute some basic MongoDB operations in a MongoDB deployment. We will be performing some of the following basic operations.</p> <ol> <li>Backup a MongoDB database</li> <li>Drop a database</li> <li>Restore the database</li> <li>Shutdown a MongoDB Enterprise</li> <li>Startup a MongoDB Enterprise</li> </ol>"},{"location":"lab3_operations/#mongodb-basic-operations-steps","title":"MongoDB basic operations steps","text":""},{"location":"lab3_operations/#backup-a-mongodb-database","title":"Backup a MongoDB database","text":"<p>Make sure you are connected to the Linux guest from the previous step.</p> <p>In this lab we are going to use the mongodump utility to backup our lab database \"labtest\". </p> <p>Enter the following command to save the backup of the labtest database inside /tmp  directory</p> <pre><code>   mongodump -v --db labtest --out /tmp\n</code></pre> The following is an example where the terminal will show that the database dump is taken [click to expand me] <pre><code>[root@p1243-zvm1 MongoDB-Wildfire-Workshop]# mongodump -v --db labtest --out /tmp\n2025-03-13T17:05:10.012-0400    dumping up to 1 collections in parallel\n2025-03-13T17:05:10.020-0400    writing labtest.employee to /tmp/labtest/employee.bson\n2025-03-13T17:05:10.022-0400    done dumping labtest.employee (2 documents)\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre> <p>Enter the following command to list the /tmp/labtest directory </p> <pre><code>   ls -alF /tmp/labtest/\n</code></pre> The following is an example where the terminal will show that the database dump is taken inside /tmp/labtest directory [click to expand me] <pre><code>[root@p1243-zvm1 MongoDB-Wildfire-Workshop]# ls -alF /tmp/labtest/\ntotal 16\ndrwxr-xr-x. 2 root root 4096 Mar 13 17:05 ./\ndrwxrwxrwt. 5 root root 4096 Mar 13 17:11 ../\n-rw-r--r--. 1 root root  128 Mar 13 17:05 employee.bson\n-rw-r--r--. 1 root root  175 Mar 13 17:05 employee.metadata.json\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab3_operations/#drop-a-mongodb-database","title":"Drop a MongoDB database","text":"<p>In this lab we are going to use the db.dropDatabase() utility to drop our database \"labtest\".  First let us connect to mongosh and list the databases in the environment by using show dbs command</p> <p>Enter the following commands to connect to MongoDB and list the databases</p> <pre><code>   mongosh;\n   show dbs\n</code></pre> The following is an example where the terminal will show that there are four databases in the deployment [Click to expand me] <pre><code>Enterprise test&gt; show dbs\nadmin    40.00 KiB\nconfig   72.00 KiB\nlabtest  72.00 KiB\nlocal    40.00 KiB\nEnterprise test&gt;\n</code></pre> <p>Now connect to the \"labtest\" database, drop that database by db.dropDatabase() utility and then list the databases by entering the following series of commands</p> <pre><code>   use labtest\n   db.dropDatabase()\n   show dbs\n</code></pre> The following is an example where the terminal will show that there are only three databases in the deployment [Click to expand me] <pre><code>Enterprise test&gt; use labtest\nswitched to db labtest\nEnterprise labtest&gt; db.dropDatabase();\n{ ok: 1, dropped: 'labtest' }\nEnterprise labtest&gt; show dbs\nadmin    40.00 KiB\nconfig  108.00 KiB\nlocal    40.00 KiB\nEnterprise labtest&gt;\n</code></pre> <p>Now let us exit the mongosh shell environment by issuing exit command</p> <pre><code>      exit\n</code></pre>"},{"location":"lab3_operations/#restore-a-mongodb-database","title":"Restore a MongoDB database","text":"<p>In this part of the lab we are going to use the mongorestore utility to restore our deleted lab database \"labtest\". </p> <p>Enter the following command to restore the backup of the labtest database available inside /tmp  directory</p> <pre><code>   mongorestore -v --db labtest  --drop  /tmp/labtest\n</code></pre> The following is an example where the terminal will show that the database dump is restored [click to expand me] <pre><code>   [root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mongorestore -v --db labtest  --drop  /tmp/labtest\n   2025-03-14T14:27:41.092-0400    using write concern: &amp;{majority &lt;nil&gt; 0s}\n   2025-03-14T14:27:41.096-0400    The --db and --collection flags are deprecated for this use-case; please use --nsInclude instead, i.e. with --nsInclude=${DATABASE}.${COLLECTION}\n   2025-03-14T14:27:41.096-0400    building a list of collections to restore from /tmp/labtest dir\n   2025-03-14T14:27:41.096-0400    found collection labtest.employee bson to restore to labtest.employee\n   2025-03-14T14:27:41.096-0400    found collection metadata from labtest.employee to restore to labtest.employee\n   2025-03-14T14:27:41.096-0400    reading metadata for labtest.employee from /tmp/labtest/employee.metadata.json\n   2025-03-14T14:27:41.096-0400    creating collection labtest.employee with no metadata\n   2025-03-14T14:27:41.102-0400    restoring labtest.employee from /tmp/labtest/employee.bson\n   2025-03-14T14:27:41.113-0400    finished restoring labtest.employee (2 documents, 0 failures)\n   2025-03-14T14:27:41.113-0400    no indexes to restore for collection labtest.employee\n   2025-03-14T14:27:41.113-0400    2 document(s) restored successfully. 0 document(s) failed to restore.\n   [root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre> <p>Let us connect back to mongosh and list the databases in the environment by using show dbs command</p> <p>Enter the following command to connect to MongoDB and list the databases and then connect to labtest database and find the documents</p> <pre><code>   mongosh\n   show dbs\n   use labtest\n   db.employee.find()\n</code></pre> The following is an example where the terminal will show that the database dump is restored [click to expand me] <pre><code>Enterprise test&gt; show dbs\nadmin    40.00 KiB\nconfig   96.00 KiB\nlabtest  40.00 KiB\nlocal    40.00 KiB\nEnterprise test&gt; use labtest\nswitched to db labtest\nEnterprise labtest&gt; db.employee.find()\n[\n{\n   _id: ObjectId('67d46f56d027864d37a63a58'),\n   name: 'John Doe',\n   number: 1000,\n   lastUpdated: ISODate('2025-03-14T18:03:35.947Z')\n},\n{\n   _id: ObjectId('67d46f61d027864d37a63a5a'),\n   name: 'Super Man',\n   number: 2000\n}\n]\nEnterprise labtest&gt;\n</code></pre>"},{"location":"lab3_operations/#shutdown-mongodb-enterprise","title":"Shutdown MongoDB Enterprise","text":"<p>In this part of the lab we are going to shutdown MongoDB by using  db.shutdownServer(). You must issue the db.shutdownServer() operation against the admin database. </p> <p>Enter the following commands  </p> <pre><code>   use admin\n   db.shutdownServer()\n   exit\n</code></pre> The following is an example where the terminal will show that there are four databases in the deployment [Click to expand me] <pre><code>Enterprise labtest&gt; use admin\nswitched to db admin\nEnterprise admin&gt; db.shutdownServer()\nMongoNetworkError: connection 4 to 127.0.0.1:27017 closed\nEnterprise admin&gt; exit\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab3_operations/#start-a-mongodb-enterprise","title":"Start a MongoDB Enterprise","text":"<p>In this part of the lab we are going to start MongoDB Enterprise.  We need to specify the following parameters: Data, log file and specify the fork option to start the mongod in the background. Then we will connect to mongosh shell.</p> <p>Enter the following commands  </p> <pre><code>   mongod  --dbpath /var/lib/mongodb --logpath /var/log/mongodb/mongod.log --fork --bind_ip_all\n   mongosh\n</code></pre> The following is an example where the terminal will show that the MongoDB is started and waiting for connections [Click to expand me] <pre><code>[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mongod  --dbpath /var/lib/mongodb --logpath /var/log/mongodb/mongod.log --fork --bind_ip_all\nabout to fork child process, waiting until server is ready for connections.\nforked process: 112970\nchild process started successfully, parent exiting\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#mongosh\nCurrent Mongosh Log ID: 67d49ba95b1ee08487a63a57\nConnecting to:          mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+2.4.2\nUsing MongoDB:          7.0.17\nUsing Mongosh:          2.4.2\n\nFor mongosh info see: https://www.mongodb.com/docs/mongodb-shell/\n\n------\n   The server generated these startup warnings when booting\n   2025-03-14T16:56:05.980-04:00: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem\n   2025-03-14T16:56:06.187-04:00: Access control is not enabled for the database. Read and write access to data and configuration is unrestricted\n   2025-03-14T16:56:06.187-04:00: You are running this process as the root user, which is not recommended\n   2025-03-14T16:56:06.187-04:00: /sys/kernel/mm/transparent_hugepage/enabled is 'always'. We suggest setting it to 'never' in this binary version\n   2025-03-14T16:56:06.187-04:00: Soft rlimits for open file descriptors too low\n------\n\nEnterprise test&gt;\n</code></pre> <p>In this part of the lab we will shutdown MongoDB by using  db.shutdownServer(). You must issue the db.shutdownServer() operation against the admin database. </p> <p>Enter the following commands  </p> <pre><code>      use admin\n      db.shutdownServer()\n      exit\n</code></pre> The following is an example of shutdown [Click to expand me] <p>```   Enterprise test&gt; use admin   switched to db admin   Enterprise admin&gt; db.shutdownServer()   MongoNetworkError: connection 4 to 127.0.0.1:27017 closed   Enterprise admin&gt; exit   [root@p1243-zvm1 MongoDB-Wildfire-Workshop]#</p>"},{"location":"lab3_operations/#summary","title":"Summary","text":"<p>In this lab we have executed some basic MongoDB commands in a MongoDB deployment  using  mongosh  shell environment. </p>"},{"location":"lab4_advanced/","title":"MongoDB Advanced operations lab","text":""},{"location":"lab4_advanced/#overview","title":"Overview","text":"<p>In this lab we will perform some advanced MongoDB operations in a MongoDB deployment.  </p> <ol> <li>Setup a MongoDB replication cluster </li> </ol>"},{"location":"lab4_advanced/#mongodb-advanced-operations","title":"MongoDB advanced operations","text":""},{"location":"lab4_advanced/#setup-a-mongodb-replication-cluster","title":"Setup a MongoDB replication cluster","text":"<p>Make sure you are connected to your Linux guest from the previous step.</p> <p>In this part of the lab we are going to setup a three node MongoDB replication cluster in a single Linux Guest, Just for lab Do not try in production. In production environment we need to setup the MongoDB replication nodes at least in three different servers.</p> <p>We will follow these steps</p> <p>Start the mongod services specifying the name of the replica set. In our case rs0.  </p> <p>Start another mongod instance with a different database directory and a port number</p> <p>Start one more mongod instance with a different database directory and a port number</p> <p>Start replication</p> <p>Check the replication </p>"},{"location":"lab4_advanced/#setup-the-first-replication-node","title":"Setup the first replication node","text":"<p>We are going to setup a three node replication node and in the first node which will act as a primary node.</p> <p>We will start the mongod services for the first node with the following parameters:</p> <p>The name of the replica set as rs0</p> <p>The data file path as /var/lib/mongodb</p> <p>The log file path as /var/log/mongodb/mongod.log</p> <p>And we will set the the mongod to be running in the background  </p> <p>Enter the following commands  </p> <pre><code>   mongod  --dbpath /var/lib/mongodb --logpath /var/log/mongodb/mongod.log --fork --bind_ip_all --replSet rs0\n</code></pre> The following is an example where the terminal will show that the MongoDB is started and waiting for connections [Click to expand me] <pre><code>[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mongod  --dbpath /var/lib/mongodb --logpath /var/log/mongodb/mongod.log --fork --bind_ip_all --replSet rs0\nabout to fork child process, waiting until server is ready for connections.\nforked process: 113404\nchild process started successfully, parent exiting\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab4_advanced/#setup-the-second-replication-node","title":"Setup the second replication node","text":"<p>We are going to setup the second node in our replication cluster which will act as secondary node. As our nodes are running in the same Linux guest it should have its own data, log directory as well as a new port to listen.</p> <p>We will start the mongod services for the second node with the following parameters:</p> <p>The name of the replica set as rs0</p> <p>The data file path as /var/lib/mongodb1</p> <p>The log file path as /var/log/mongodb1/mongod.log</p> <p>The port number as  27018 </p> <p>And we will set the the mongod to be running in the background</p> <p>Enter the following commands  </p> <pre><code>   mkdir /var/lib/mongodb1/;\n   mkdir /var/log/mongodb1/;\n   mongod --port 27018  --dbpath /var/lib/mongodb1 --logpath /var/log/mongodb1/mongod.log --fork --bind_ip_all --replSet rs0\n</code></pre> The following is an example where the terminal will show that the MongoDB is started and waiting for connections [Click to expand me] <pre><code>[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mkdir /var/lib/mongodb1/;\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mkdir /var/log/mongodb1/;\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mongod --port 27018  --dbpath /var/lib/mongodb1 --logpath /var/log/mongodb1/mongod.log --fork --bind_ip_all --replSet rs0\nabout to fork child process, waiting until server is ready for connections.\nforked process: 113514\nchild process started successfully, parent exiting\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab4_advanced/#setup-the-third-replication-node","title":"Setup the third replication node","text":"<p>We are going to setup the third node in our replication cluster which will act as another secondary node. As our nodes are running in the same Linux guest this node should also have its own data, log directory as well as a new port to listen.</p> <p>We will start the mongod services for the second node with the following parameters:</p> <p>The name of the replica set as rs0</p> <p>The data file path as /var/lib/mongodb2</p> <p>The log file path as /var/log/mongodb2/mongod.log</p> <p>The port number as  27019 </p> <p>And we will set the the mongod to be running in the background</p> <p>Enter the following commands  </p> <pre><code>   mkdir /var/lib/mongodb2/;\n   mkdir /var/log/mongodb2/;\n   mongod --port 27019  --dbpath /var/lib/mongodb2 --logpath /var/log/mongodb2/mongod.log --fork --bind_ip_all --replSet rs0\n</code></pre> The following is an example where the terminal will show that the MongoDB is started and waiting for connections [Click to expand me] <pre><code>[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mkdir /var/lib/mongodb2/;\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mkdir /var/log/mongodb2/;\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#    mongod --port 27019  --dbpath /var/lib/mongodb2 --logpath /var/log/mongodb2/mongod.log --fork --bind_ip_all --replSet rs0\nabout to fork child process, waiting until server is ready for connections.\nforked process: 113604\nchild process started successfully, parent exiting\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab4_advanced/#initialize-the-replication-nodes","title":"Initialize the replication nodes","text":"<p>To initialize the replication cluster, open mongosh shell and run rs.initiate() in the primary node </p> <p>Add the MongoDB secondary nodes that we already started, by running rs.add() <p>You can run rs.status() to check the replication node status</p> <p>Enter the following commands  </p> <pre><code>   mongosh\n   rs.initiate() \n   rs.status() \n   **In the following command change the hostname to your hostname**\n   rs.add(\"HOSTNAME:27018\")\n   rs.status() \n   rs.add(\"HOSTNAME:27019\")\n   Enterprise test&gt; rs.status() \n</code></pre> The following is an example where the terminal will show that the MongoDB instances are started and waiting for replication [Click to expand me] <pre><code>[root@p1243-zvm1 MongoDB-Wildfire-Workshop]# mongosh\nCurrent Mongosh Log ID: 67d4aef9b5283a4da4a63a57\nConnecting to:          mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+2.4.2\nUsing MongoDB:          7.0.17\nUsing Mongosh:          2.4.2\n\nFor mongosh info see: https://www.mongodb.com/docs/mongodb-shell/\n\n------\n   The server generated these startup warnings when booting\n   2025-03-14T18:00:12.416-04:00: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem\n   2025-03-14T18:00:12.623-04:00: Access control is not enabled for the database. Read and write access to data and configuration is unrestricted\n   2025-03-14T18:00:12.623-04:00: You are running this process as the root user, which is not recommended\n   2025-03-14T18:00:12.623-04:00: /sys/kernel/mm/transparent_hugepage/enabled is 'always'. We suggest setting it to 'never' in this binary version\n   2025-03-14T18:00:12.623-04:00: Soft rlimits for open file descriptors too low\n------\n\nEnterprise test&gt; cls\n\nEnterprise test&gt; rs.initiate()\n{\ninfo2: 'no configuration specified. Using a default configuration for the set',\nme: 'p1243-zvm1:27017',\nok: 1\n}\nEnterprise rs0 [direct: other] test&gt; rs.status()\n{\nset: 'rs0',\ndate: ISODate('2025-03-14T22:35:10.178Z'),\nmyState: 1,\nterm: Long('1'),\nsyncSourceHost: '',\nsyncSourceId: -1,\nheartbeatIntervalMillis: Long('2000'),\nmajorityVoteCount: 1,\nwriteMajorityCount: 1,\nvotingMembersCount: 1,\nwritableVotingMembersCount: 1,\noptimes: {\n   lastCommittedOpTime: { ts: Timestamp({ t: 1741991701, i: 23 }), t: Long('1') },\n   lastCommittedWallTime: ISODate('2025-03-14T22:35:01.597Z'),\n   readConcernMajorityOpTime: { ts: Timestamp({ t: 1741991701, i: 23 }), t: Long('1') },\n   appliedOpTime: { ts: Timestamp({ t: 1741991701, i: 23 }), t: Long('1') },\n   durableOpTime: { ts: Timestamp({ t: 1741991701, i: 23 }), t: Long('1') },\n   lastAppliedWallTime: ISODate('2025-03-14T22:35:01.597Z'),\n   lastDurableWallTime: ISODate('2025-03-14T22:35:01.597Z')\n},\nlastStableRecoveryTimestamp: Timestamp({ t: 1741991701, i: 1 }),\nelectionCandidateMetrics: {\n   lastElectionReason: 'electionTimeout',\n   lastElectionDate: ISODate('2025-03-14T22:35:01.518Z'),\n   electionTerm: Long('1'),\n   lastCommittedOpTimeAtElection: { ts: Timestamp({ t: 1741991701, i: 1 }), t: Long('-1') },\n   lastSeenOpTimeAtElection: { ts: Timestamp({ t: 1741991701, i: 1 }), t: Long('-1') },\n   numVotesNeeded: 1,\n   priorityAtElection: 1,\n   electionTimeoutMillis: Long('10000'),\n   newTermStartDate: ISODate('2025-03-14T22:35:01.535Z'),\n   wMajorityWriteAvailabilityDate: ISODate('2025-03-14T22:35:01.549Z')\n},\nmembers: [\n   {\n      _id: 0,\n      name: 'p1243-zvm1:27017',\n      health: 1,\n      state: 1,\n      stateStr: 'PRIMARY',\n      uptime: 2098,\n      optime: { ts: Timestamp({ t: 1741991701, i: 23 }), t: Long('1') },\n      optimeDate: ISODate('2025-03-14T22:35:01.000Z'),\n      lastAppliedWallTime: ISODate('2025-03-14T22:35:01.597Z'),\n      lastDurableWallTime: ISODate('2025-03-14T22:35:01.597Z'),\n      syncSourceHost: '',\n      syncSourceId: -1,\n      infoMessage: 'Could not find member to sync from',\n      electionTime: Timestamp({ t: 1741991701, i: 2 }),\n      electionDate: ISODate('2025-03-14T22:35:01.000Z'),\n      configVersion: 1,\n      configTerm: 1,\n      self: true,\n      lastHeartbeatMessage: ''\n   }\n],\nok: 1,\n'$clusterTime': {\n   clusterTime: Timestamp({ t: 1741991701, i: 23 }),\n   signature: {\n      hash: Binary.createFromBase64('AAAAAAAAAAAAAAAAAAAAAAAAAAA=', 0),\n      keyId: Long('0')\n   }\n},\noperationTime: Timestamp({ t: 1741991701, i: 23 })\n}\nEnterprise rs0 [direct: primary] test&gt;\n\n-------------------------\nEnterprise rs0 [direct: primary] test&gt; rs.add(\"p1243-zvm1:27018\")\n{\nok: 1,\n'$clusterTime': {\n   clusterTime: Timestamp({ t: 1741991791, i: 1 }),\n   signature: {\n      hash: Binary.createFromBase64('AAAAAAAAAAAAAAAAAAAAAAAAAAA=', 0),\n      keyId: Long('0')\n   }\n},\noperationTime: Timestamp({ t: 1741991791, i: 1 })\n}\nEnterprise rs0 [direct: primary] test&gt; rs.status()\n{\nset: 'rs0',\ndate: ISODate('2025-03-14T22:36:35.567Z'),\nmyState: 1,\nterm: Long('1'),\nsyncSourceHost: '',\nsyncSourceId: -1,\nheartbeatIntervalMillis: Long('2000'),\nmajorityVoteCount: 2,\nwriteMajorityCount: 2,\nvotingMembersCount: 2,\nwritableVotingMembersCount: 2,\noptimes: {\n   lastCommittedOpTime: { ts: Timestamp({ t: 1741991793, i: 1 }), t: Long('1') },\n   lastCommittedWallTime: ISODate('2025-03-14T22:36:33.074Z'),\n   readConcernMajorityOpTime: { ts: Timestamp({ t: 1741991793, i: 1 }), t: Long('1') },\n   appliedOpTime: { ts: Timestamp({ t: 1741991793, i: 1 }), t: Long('1') },\n   durableOpTime: { ts: Timestamp({ t: 1741991793, i: 1 }), t: Long('1') },\n   lastAppliedWallTime: ISODate('2025-03-14T22:36:33.074Z'),\n   lastDurableWallTime: ISODate('2025-03-14T22:36:33.074Z')\n},\nlastStableRecoveryTimestamp: Timestamp({ t: 1741991751, i: 1 }),\nelectionCandidateMetrics: {\n   lastElectionReason: 'electionTimeout',\n   lastElectionDate: ISODate('2025-03-14T22:35:01.518Z'),\n   electionTerm: Long('1'),\n   lastCommittedOpTimeAtElection: { ts: Timestamp({ t: 1741991701, i: 1 }), t: Long('-1') },\n   lastSeenOpTimeAtElection: { ts: Timestamp({ t: 1741991701, i: 1 }), t: Long('-1') },\n   numVotesNeeded: 1,\n   priorityAtElection: 1,\n   electionTimeoutMillis: Long('10000'),\n   newTermStartDate: ISODate('2025-03-14T22:35:01.535Z'),\n   wMajorityWriteAvailabilityDate: ISODate('2025-03-14T22:35:01.549Z')\n},\nmembers: [\n   {\n      _id: 0,\n      name: 'p1243-zvm1:27017',\n      health: 1,\n      state: 1,\n      stateStr: 'PRIMARY',\n      uptime: 2183,\n      optime: { ts: Timestamp({ t: 1741991793, i: 1 }), t: Long('1') },\n      optimeDate: ISODate('2025-03-14T22:36:33.000Z'),\n      lastAppliedWallTime: ISODate('2025-03-14T22:36:33.074Z'),\n      lastDurableWallTime: ISODate('2025-03-14T22:36:33.074Z'),\n      syncSourceHost: '',\n      syncSourceId: -1,\n      infoMessage: 'Could not find member to sync from',\n      electionTime: Timestamp({ t: 1741991701, i: 2 }),\n      electionDate: ISODate('2025-03-14T22:35:01.000Z'),\n      configVersion: 3,\n      configTerm: 1,\n      self: true,\n      lastHeartbeatMessage: ''\n   },\n   {\n      _id: 1,\n      name: 'p1243-zvm1:27018',\n      health: 1,\n      state: 2,\n      stateStr: 'SECONDARY',\n      uptime: 4,\n      optime: { ts: Timestamp({ t: 1741991793, i: 1 }), t: Long('1') },\n      optimeDurable: { ts: Timestamp({ t: 1741991793, i: 1 }), t: Long('1') },\n      optimeDate: ISODate('2025-03-14T22:36:33.000Z'),\n      optimeDurableDate: ISODate('2025-03-14T22:36:33.000Z'),\n      lastAppliedWallTime: ISODate('2025-03-14T22:36:33.074Z'),\n      lastDurableWallTime: ISODate('2025-03-14T22:36:33.074Z'),\n      lastHeartbeat: ISODate('2025-03-14T22:36:35.077Z'),\n      lastHeartbeatRecv: ISODate('2025-03-14T22:36:33.577Z'),\n      pingMs: Long('0'),\n      lastHeartbeatMessage: '',\n      syncSourceHost: 'p1243-zvm1:27017',\n      syncSourceId: 0,\n      infoMessage: '',\n      configVersion: 3,\n      configTerm: 1\n   }\n],\nok: 1,\n'$clusterTime': {\n   clusterTime: Timestamp({ t: 1741991793, i: 1 }),\n   signature: {\n      hash: Binary.createFromBase64('AAAAAAAAAAAAAAAAAAAAAAAAAAA=', 0),\n      keyId: Long('0')\n   }\n},\noperationTime: Timestamp({ t: 1741991793, i: 1 })\n}\nEnterprise rs0 [direct: primary] test&gt;\n\n---------------------------------\nEnterprise rs0 [direct: primary] test&gt; rs.add(\"p1243-zvm1:27019\")\n{\nok: 1,\n'$clusterTime': {\n   clusterTime: Timestamp({ t: 1741991876, i: 1 }),\n   signature: {\n      hash: Binary.createFromBase64('AAAAAAAAAAAAAAAAAAAAAAAAAAA=', 0),\n      keyId: Long('0')\n   }\n},\noperationTime: Timestamp({ t: 1741991876, i: 1 })\n}\nEnterprise rs0 [direct: primary] test&gt; rs.status()\n{\nset: 'rs0',\ndate: ISODate('2025-03-14T22:38:04.243Z'),\nmyState: 1,\nterm: Long('1'),\nsyncSourceHost: '',\nsyncSourceId: -1,\nheartbeatIntervalMillis: Long('2000'),\nmajorityVoteCount: 2,\nwriteMajorityCount: 2,\nvotingMembersCount: 3,\nwritableVotingMembersCount: 3,\noptimes: {\n   lastCommittedOpTime: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n   lastCommittedWallTime: ISODate('2025-03-14T22:37:58.648Z'),\n   readConcernMajorityOpTime: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n   appliedOpTime: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n   durableOpTime: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n   lastAppliedWallTime: ISODate('2025-03-14T22:37:58.648Z'),\n   lastDurableWallTime: ISODate('2025-03-14T22:37:58.648Z')\n},\nlastStableRecoveryTimestamp: Timestamp({ t: 1741991878, i: 1 }),\nelectionCandidateMetrics: {\n   lastElectionReason: 'electionTimeout',\n   lastElectionDate: ISODate('2025-03-14T22:35:01.518Z'),\n   electionTerm: Long('1'),\n   lastCommittedOpTimeAtElection: { ts: Timestamp({ t: 1741991701, i: 1 }), t: Long('-1') },\n   lastSeenOpTimeAtElection: { ts: Timestamp({ t: 1741991701, i: 1 }), t: Long('-1') },\n   numVotesNeeded: 1,\n   priorityAtElection: 1,\n   electionTimeoutMillis: Long('10000'),\n   newTermStartDate: ISODate('2025-03-14T22:35:01.535Z'),\n   wMajorityWriteAvailabilityDate: ISODate('2025-03-14T22:35:01.549Z')\n},\nmembers: [\n   {\n      _id: 0,\n      name: 'p1243-zvm1:27017',\n      health: 1,\n      state: 1,\n      stateStr: 'PRIMARY',\n      uptime: 2272,\n      optime: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n      optimeDate: ISODate('2025-03-14T22:37:58.000Z'),\n      lastAppliedWallTime: ISODate('2025-03-14T22:37:58.648Z'),\n      lastDurableWallTime: ISODate('2025-03-14T22:37:58.648Z'),\n      syncSourceHost: '',\n      syncSourceId: -1,\n      infoMessage: '',\n      electionTime: Timestamp({ t: 1741991701, i: 2 }),\n      electionDate: ISODate('2025-03-14T22:35:01.000Z'),\n      configVersion: 5,\n      configTerm: 1,\n      self: true,\n      lastHeartbeatMessage: ''\n   },\n   {\n      _id: 1,\n      name: 'p1243-zvm1:27018',\n      health: 1,\n      state: 2,\n      stateStr: 'SECONDARY',\n      uptime: 93,\n      optime: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n      optimeDurable: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n      optimeDate: ISODate('2025-03-14T22:37:58.000Z'),\n      optimeDurableDate: ISODate('2025-03-14T22:37:58.000Z'),\n      lastAppliedWallTime: ISODate('2025-03-14T22:37:58.648Z'),\n      lastDurableWallTime: ISODate('2025-03-14T22:37:58.648Z'),\n      lastHeartbeat: ISODate('2025-03-14T22:38:02.651Z'),\n      lastHeartbeatRecv: ISODate('2025-03-14T22:38:02.651Z'),\n      pingMs: Long('0'),\n      lastHeartbeatMessage: '',\n      syncSourceHost: 'p1243-zvm1:27017',\n      syncSourceId: 0,\n      infoMessage: '',\n      configVersion: 5,\n      configTerm: 1\n   },\n   {\n      _id: 2,\n      name: 'p1243-zvm1:27019',\n      health: 1,\n      state: 2,\n      stateStr: 'SECONDARY',\n      uptime: 7,\n      optime: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n      optimeDurable: { ts: Timestamp({ t: 1741991878, i: 1 }), t: Long('1') },\n      optimeDate: ISODate('2025-03-14T22:37:58.000Z'),\n      optimeDurableDate: ISODate('2025-03-14T22:37:58.000Z'),\n      lastAppliedWallTime: ISODate('2025-03-14T22:37:58.648Z'),\n      lastDurableWallTime: ISODate('2025-03-14T22:37:58.648Z'),\n      lastHeartbeat: ISODate('2025-03-14T22:38:02.653Z'),\n      lastHeartbeatRecv: ISODate('2025-03-14T22:38:03.152Z'),\n      pingMs: Long('2'),\n      lastHeartbeatMessage: '',\n      syncSourceHost: 'p1243-zvm1:27018',\n      syncSourceId: 1,\n      infoMessage: '',\n      configVersion: 5,\n      configTerm: 1\n   }\n],\nok: 1,\n'$clusterTime': {\n   clusterTime: Timestamp({ t: 1741991878, i: 1 }),\n   signature: {\n      hash: Binary.createFromBase64('AAAAAAAAAAAAAAAAAAAAAAAAAAA=', 0),\n      keyId: Long('0')\n   }\n},\noperationTime: Timestamp({ t: 1741991878, i: 1 })\n}\nEnterprise rs0 [direct: primary] test&gt;\n</code></pre>"},{"location":"lab4_advanced/#check-replication","title":"Check replication","text":"<p>Now let us check if the replication is happening correctly.</p> <p>In the PRIMARY instance, insert a document to our MongoDB Database labtest </p> <p>Enter the following commands  </p> <pre><code>   show dbs\n   use labtest \n      db.employee.insertOne(\n   {\n    name: \"Iron Man\",\n    number: 5000  \n      }\n     )\n   db.employee.find()\n</code></pre> The following is an example output of the previous commands [Click to expand me] <pre><code>Enterprise rs0 [direct: primary] test&gt; show dbs\nadmin     80.00 KiB\nconfig   200.00 KiB\nlabtest   40.00 KiB\nlocal    732.00 KiB\nEnterprise rs0 [direct: primary] test&gt;    \nEnterprise rs0 [direct: primary] test&gt; use labtest\nswitched to db labtest\nEnterprise rs0 [direct: primary] labtest&gt;    db.employee.find()\n[\n{\n   _id: ObjectId('67d46f56d027864d37a63a58'),\n   name: 'John Doe',\n   number: 1000,\n   lastUpdated: ISODate('2025-03-14T18:03:35.947Z')\n},\n{\n   _id: ObjectId('67d46f61d027864d37a63a5a'),\n   name: 'Super Man',\n   number: 2000\n}\n]\nEnterprise rs0 [direct: primary] labtest&gt; db.employee.insertOne(\n...    {\n...     name: \"Iron Man\",\n...     number: 5000\n...    }\n...   )\n{\nacknowledged: true,\ninsertedId: ObjectId('67d5e07dbc29fd3a01a63a58')\n}\nEnterprise rs0 [direct: primary] labtest&gt; db.employee.find()\n[\n{\n   _id: ObjectId('67d46f56d027864d37a63a58'),\n   name: 'John Doe',\n   number: 1000,\n   lastUpdated: ISODate('2025-03-14T18:03:35.947Z')\n},\n{\n   _id: ObjectId('67d46f61d027864d37a63a5a'),\n   name: 'Super Man',\n   number: 2000\n},\n{\n   _id: ObjectId('67d5e07dbc29fd3a01a63a58'),\n   name: 'Iron Man',\n   number: 5000\n}\n]\nEnterprise rs0 [direct: primary] labtest&gt;\n</code></pre> <p>Now it is time to check in the SECONDARY instances to see if the replication happened.</p> <p>To connect to MongoDB instances running other than the default port we have to specify the port number.  Once connected check if the labtest database has the same set of documents as in the primary instance. Use the following set of commands after exiting the primary instance mongo shell.</p> <p><pre><code>   exit\n   mongosh --port 27018\n   show dbs\n   use labtest\n   db.employee.find()\n</code></pre> As seen in the following output the number of databases and the labtest database records are same as in the primary instance</p> The following is an example output of the previous commands [Click to expand me] <pre><code>Enterprise rs0 [direct: primary] labtest&gt; exit\n[root@p1243-zvm1 ~]# mongosh --port 27018\nCurrent Mongosh Log ID: 67d5e4fc11240b7aa8a63a57\nConnecting to:          mongodb://127.0.0.1:27018/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+2.4.2\nUsing MongoDB:          7.0.17\nUsing Mongosh:          2.4.2\n\nFor mongosh info see: https://www.mongodb.com/docs/mongodb-shell/\n\n------\n   The server generated these startup warnings when booting\n   2025-03-14T18:14:08.067-04:00: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem\n   2025-03-14T18:14:08.122-04:00: Access control is not enabled for the database. Read and write access to data and configuration is unrestricted\n   2025-03-14T18:14:08.122-04:00: You are running this process as the root user, which is not recommended\n   2025-03-14T18:14:08.123-04:00: /sys/kernel/mm/transparent_hugepage/enabled is 'always'. We suggest setting it to 'never' in this binary version\n   2025-03-14T18:14:08.123-04:00: Soft rlimits for open file descriptors too low\n------\n\nEnterprise rs0 [direct: secondary] test&gt; cls\n\nEnterprise rs0 [direct: secondary] test&gt; show dbs\nadmin     80.00 KiB\nconfig   308.00 KiB\nlabtest   72.00 KiB\nlocal    700.00 KiB\nEnterprise rs0 [direct: secondary] test&gt; use labtest\nswitched to db labtest\nEnterprise rs0 [direct: secondary] labtest&gt; db.employee.find()\n[\n{\n   _id: ObjectId('67d46f56d027864d37a63a58'),\n   name: 'John Doe',\n   number: 1000,\n   lastUpdated: ISODate('2025-03-14T18:03:35.947Z')\n},\n{\n   _id: ObjectId('67d46f61d027864d37a63a5a'),\n   name: 'Super Man',\n   number: 2000\n},\n{\n   _id: ObjectId('67d5e07dbc29fd3a01a63a58'),\n   name: 'Iron Man',\n   number: 5000\n}\n]\nEnterprise rs0 [direct: secondary]\n</code></pre> <p>Now let us check the third instance running at port 27019 if the labtest database has the same set of documents as in the primary instance. Use the following set of commands after exiting the connected mongo shell.</p> <p><pre><code>   exit\n   mongosh --port 27019\n   show dbs\n   use labtest\n   db.employee.find()\n</code></pre> As seen in the following output the number of databases and the labtest database records are same as in the primary instance</p> The following is an example output of the previous commands [Click to expand me] <pre><code>Enterprise rs0 [direct: secondary] labtest&gt; exit\n[root@p1243-zvm1 ~]# mongosh --port 27019\nCurrent Mongosh Log ID: 67d5e54bc60fc8c961a63a57\nConnecting to:          mongodb://127.0.0.1:27019/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+2.4.2\nUsing MongoDB:          7.0.17\nUsing Mongosh:          2.4.2\n\nFor mongosh info see: https://www.mongodb.com/docs/mongodb-shell/\n\n------\n   The server generated these startup warnings when booting\n   2025-03-14T18:26:33.204-04:00: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem\n   2025-03-14T18:26:33.227-04:00: Access control is not enabled for the database. Read and write access to data and configuration is unrestricted\n   2025-03-14T18:26:33.227-04:00: You are running this process as the root user, which is not recommended\n   2025-03-14T18:26:33.227-04:00: /sys/kernel/mm/transparent_hugepage/enabled is 'always'. We suggest setting it to 'never' in this binary version\n   2025-03-14T18:26:33.227-04:00: Soft rlimits for open file descriptors too low\n------\n\nEnterprise rs0 [direct: secondary] test&gt; cls\n\nEnterprise rs0 [direct: secondary] test&gt; use labtest\nswitched to db labtest\nEnterprise rs0 [direct: secondary] labtest&gt; db.employee.find()\n[\n{\n   _id: ObjectId('67d46f56d027864d37a63a58'),\n   name: 'John Doe',\n   number: 1000,\n   lastUpdated: ISODate('2025-03-14T18:03:35.947Z')\n},\n{\n   _id: ObjectId('67d46f61d027864d37a63a5a'),\n   name: 'Super Man',\n   number: 2000\n},\n{\n   _id: ObjectId('67d5e07dbc29fd3a01a63a58'),\n   name: 'Iron Man',\n   number: 5000\n}\n]\nEnterprise rs0 [direct: secondary] labtest&gt;\n</code></pre>"},{"location":"lab4_advanced/#summary","title":"Summary","text":"<p>In this lab we have setup a replication cluster and did some basic replication activities. </p> <p>Now you can exit the mongosh shell environment by issuing exit command</p> <pre><code>   exit\n</code></pre> The following example shows the output [click to expand me] <pre><code>Enterprise labtest&gt;    exit\n[root@p1243-zvm1 MongoDB-Wildfire-Workshop]#\n</code></pre>"},{"location":"lab5_compass/","title":"MongoDB Compass Basics lab","text":""},{"location":"lab5_compass/#overview","title":"Overview","text":"<p>The objective of this lab is to explore MongoDB running on a Red Hat Enterprise Linux guest on an IBM LinuxONE system using MongoDB GUI tool Compass.</p> <p>We will be performing some of the following basic operations.</p> <ol> <li>Using Compass, make a Connection to your MongoDB deployment  </li> <li>Create a database and collection</li> <li>Bulk insert documents</li> </ol>"},{"location":"lab5_compass/#mongodb-compass-basics-lab-steps","title":"MongoDB Compass basics lab steps","text":""},{"location":"lab5_compass/#using-compass-make-a-connection-to-your-mongodb-deployment","title":"Using Compass make a connection to your MongoDB deployment","text":"<p>o   In this step we are going to use MongoDB Compass tool to connect to your MongoDB deployment on the Red Hat Linux Server  o   If MongoDB Compass is not installed, use the following link  MongoDB Compass Download  to download and install in your laptop</p> <p>Using the mouse, click the MongoDB Compass icon on your workstation and select Add new Connection. </p> <p>Then expand the Advanced connection options and select Proxy/SSH tab</p> <p></p> <p>Now select SSH with Password option    </p> <p>In the displayed screen, enter the following values:</p> <p>In the SSH Hostname field, enter your Linux guest ip address </p> <p>In the SSH Port field, enter 2223</p> <p>In the SSH Username field, enter your Linux guest user name</p> <p>In the SSH Password field, enter your Linux guest user Password</p> <p></p> <p>Then press the Save and Connect button</p> <p>And select the localhost:27017 in the left side of navigation</p> <p>The following is an example screen when you are successfully connected to MongoDB Compass</p> <p></p>"},{"location":"lab5_compass/#create-a-new-database-and-a-collection-in-that-database","title":"Create a new database and a collection in that database","text":"<p>In this step we are going to create a new database.</p> <p>Click the  tab </p> <p>Specify comptest as the database name and collection name as sample and then press create database button. </p> <p></p> <p>Now the compest database is created as you can see in the following screen</p> <p></p>"},{"location":"lab5_compass/#import-json-documents-into-a-collection","title":"Import json documents into a collection","text":"<p>In this step we are going to import documents into the sample collection of the comptest database</p> <p>We have provided sampData.json file with 10682 documents and should be available in the desktop</p> <p>Select the import data button and choose the sampData.json file</p> <p>This action will import 10682 documents and you can see them in the MongoDB Compass as in the following display</p> <p></p> <p>You may want to select TABLE  view to see the documents in readable format \ud83d\ude0a There will be around 10862 documents there. </p> <p>Feel free to move around different screens of MongoDB Compass to perform your favourite operations.</p>"},{"location":"lab5_compass/#summary","title":"Summary","text":"<p>In this lab we connected to MongoDB using Compass GUI tool.</p>"},{"location":"localdocbuild/","title":"Building the Documentation Yourself","text":"<p>!!! warning \"For Documentation Contributors Only\"</p> <pre><code>This is for people who want to update the documentation of `MongoDB Wildfire Workshop` and see the updates locally or if you are a regular user and are curious on how to do it. In most cases, just accessing the documentation via this site (https://samveluibm.github.io/MongoDB-Wildfire-Workshop/) is best. If you want to access the documentation without internet access, instead of following this documentation, you should navigate to the print page (which displays the documentation in printable format). Then, Print-&gt;Save to pdf in your web browser and access the PDF freely offline.\n</code></pre>"},{"location":"localdocbuild/#installing-necessary-pre-requisites","title":"Installing Necessary Pre-requisites","text":"<ol> <li>Install pip3 on your computer, if it's not already installed (instructions vary depending on Operating System)</li> <li> <p>Install mkdocs and plugins used in <code>MongoDB Wildfire Workshop</code> documentation</p> <pre><code>pip3 install mkdocs mkdocs-material mkdocs-git-revision-date-localized-plugin mkdocs-print-site-plugin\n</code></pre> </li> <li> <p>Get a local copy of the source code with:</p> HTTPSSSH <pre><code>git clone https://github.com/samveluIBM/MongoDB-Wildfire-Workshop.git\n</code></pre> <pre><code>git clone git@github.com:samveluIBM/MongoDB-Wildfire-Workshop.git\n</code></pre> </li> <li> <p>Change into the source code directory in your terminal</p> </li> <li> <p>Serve the documentation in a terminal while in your source code directory with:</p> <pre><code>mkdocs serve\n</code></pre> </li> <li> <p>Open a web browser and access the documentation</p> <p>The above <code>mkdocs serve</code> command should output an address to access the documentation which by default is: http://127.0.0.1:8000 which is over localhost (only accessible locally). Go to this address to access the documentation.</p> <p>!!! Tip \"Documentation updates automatically\"</p> <pre><code>If you leave the terminal tab where you ran `mkdocs serve` open, the docs will update automatically when your save your changes to the file. This way as you make changes you can check your changes at the given web site, displaying in the same way as it will when displayed as a static website on GitHub.\n</code></pre> </li> <li> <p>Make edits to the relevant markdown files in the <code>docs/</code> subfolder, and watch the changes display in realtime in your web browser when you save your file updates.</p> </li> </ol> <p>!!! Tip \"Special Documentation Features\"</p> <pre><code>To use the special features of `mkdocs-material` and the plugins used in these docs that enhance the documentation from traditional markdown, please take a look at the syntax for the various features. You can find examples of them in action in the markdown of this site by either:\n\n- Inspecting a given page of the site in your web browser\n\n    1. scroll to the top of a page with a feature you want to see how to use\n    2. click the page with an eye icon to the right of the title\n    3. Inspect the markdown for the part of the page with the given feature\n\nOR\n\n- See the markdown for the entire site in the `docs/` subfolder of the GitHub project, navigating the markdown files for each page\n\nAdditionally, you can find more examples and explainers on the [mkdocs-material reference page](https://squidfunk.github.io/mkdocs-material/reference/){target=\"_blank\" rel=\"noopener\"}.\n</code></pre>"},{"location":"onpremaccess/","title":"Lab Access to Linux guests on IBM Techzone (On-premise environment)","text":"<ol> <li> <p>The Lab excercises will be performed on Red Hat Linux 9.x guests running on IBM Z system in an On-premise enviroment hosted by IBM Techzone </p> </li> <li> <p>To access the IBM Techzone (On-premise) you need a vpn id and password</p> </li> <li> <p>Connect to the VPN by using Cisco AnyConnect client.      If you don't have AnyConnect installed on your system you may follow the steps outlined here </p> </li> <li> <p>When you established vpn connectivity you can SSH to the Linux guest:</p> </li> </ol>"},{"location":"onpremaccess/#if-you-are-using-windows-workstations","title":"If you are using windows workstations:","text":"<ul> <li>You can use PuTTY to connect and if PuTTY utility is not available, you can  download and install from the following url</li> <li>In the following PuTTY terminal</li> </ul> <ul> <li> <p>Enter your ip address from the user information section in the Host Name field and press Open</p> </li> <li> <p>In the displayed terminal enter the login as: cecuser and press enter</p> </li> <li>For the password prompt enter mongodblabuser$</li> </ul> <p>The following is an example of successful login to the Linux Guest</p> <p></p>"}]}